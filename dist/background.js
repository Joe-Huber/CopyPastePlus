(()=>{"use strict";chrome.runtime.onMessage.addListener((t,e,o)=>{if("copiedText"===t.type){const e=t.text;chrome.storage.local.get({copiedItems:[]},t=>{let o=t.copiedItems;o.length>0&&"string"==typeof o[0]&&(o=o.map(t=>({id:self.crypto.randomUUID(),text:t,timestamp:Date.now(),favorite:!1,count:1})));const s=o.findIndex(t=>t.text===e);if(-1!==s)o[s].timestamp=Date.now(),o[s].count++;else{const t={id:self.crypto.randomUUID(),text:e,timestamp:Date.now(),favorite:!1,count:1};o.push(t)}o.sort((t,e)=>e.timestamp-t.timestamp),o.length>100&&(o=o.slice(0,100)),chrome.storage.local.set({copiedItems:o})})}})})();